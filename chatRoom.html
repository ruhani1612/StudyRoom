<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusHive - Chat Rooms</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            color: #374151;
            line-height: 1.5;
            height: 100vh;
            overflow: hidden;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 12px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 60px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 20px;
            font-weight: 700;
            color: #3b82f6;
        }

        .logo::before {
            content: "ðŸŽ¯";
            margin-right: 8px;
            font-size: 24px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 8px;
            align-items: center;
        }

        .nav-link {
            padding: 8px 16px;
            text-decoration: none;
            color: #6b7280;
            font-weight: 500;
            font-size: 14px;
            border-radius: 8px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-link:hover {
            background: #f3f4f6;
            color: #374151;
        }

        .nav-link.active {
            background: #3b82f6;
            color: white;
        }

        .nav-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .btn-secondary {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            color: #374151;
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .btn-primary {
            padding: 8px 16px;
            background: #3b82f6;
            border: none;
            border-radius: 6px;
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        /* Main Layout */
        .main-layout {
            display: flex;
            height: calc(100vh - 60px);
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: white;
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .sidebar-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #374151;
        }

        .add-room-btn {
            width: 24px;
            height: 24px;
            background: #3b82f6;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .rooms-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
        }

        .room-item {
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .room-item:hover {
            background: #f3f4f6;
        }

        .room-item.active {
            background: #3b82f6;
            color: white;
        }

        .room-icon {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .room-icon.general { background: #fbbf24; }
        .room-icon.mathematics { background: #3b82f6; }
        .room-icon.break { background: #10b981; }
        .room-icon.homework { background: #8b5cf6; }
        .room-icon.daily { background: #ef4444; }
        .room-icon.brainstorming { background: #f59e0b; }

        .room-info {
            flex: 1;
            min-width: 0;
        }

        .room-name {
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .room-participants {
            font-size: 12px;
            opacity: 0.7;
        }

        .quick-join {
            margin-top: auto;
            padding: 20px;
            border-top: 1px solid #f3f4f6;
        }

        .quick-join-title {
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 12px;
        }

        /* Chat Area */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .chat-header {
            padding: 20px 24px;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chat-room-icon {
            width: 40px;
            height: 40px;
            background: #fbbf24;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .chat-room-info h2 {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 2px;
        }

        .chat-room-status {
            font-size: 14px;
            color: #6b7280;
        }

        .chat-messages {
            flex: 1;
            padding: 20px 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: 14px;
            flex-shrink: 0;
        }

        .message-content {
            flex: 1;
            min-width: 0;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .message-author {
            font-weight: 600;
            font-size: 14px;
            color: #1f2937;
        }

        .message-time {
            font-size: 12px;
            color: #9ca3af;
        }

        .message-text {
            font-size: 14px;
            color: #374151;
            line-height: 1.5;
        }

        .message-reactions {
            display: flex;
            gap: 4px;
            margin-top: 8px;
        }

        .reaction {
            padding: 2px 6px;
            background: #f3f4f6;
            border-radius: 12px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .reaction:hover {
            background: #e5e7eb;
        }

        .message-input-area {
            padding: 20px 24px;
            border-top: 1px solid #f3f4f6;
            background: #fafbfc;
        }

        .message-input-container {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .message-input {
            flex: 1;
            min-height: 40px;
            max-height: 120px;
            padding: 10px 16px;
            border: 1px solid #d1d5db;
            border-radius: 20px;
            font-size: 14px;
            resize: none;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .message-input:focus {
            border-color: #3b82f6;
        }

        .send-btn {
            width: 40px;
            height: 40px;
            background: #3b82f6;
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .send-btn:hover {
            background: #2563eb;
            transform: scale(1.05);
        }

        .send-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        /* Active Members Panel */
        .members-panel {
            width: 280px;
            background: white;
            border-left: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
        }

        .members-header {
            padding: 20px;
            border-bottom: 1px solid #f3f4f6;
        }

        .members-title {
            font-weight: 600;
            color: #374151;
            margin-bottom: 4px;
        }

        .members-count {
            font-size: 14px;
            color: #6b7280;
        }

        .members-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px 20px;
        }

        .member-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 6px;
            padding: 8px;
            margin-bottom: 4px;
        }

        .member-item:hover {
            background: #f9fafb;
        }

        .member-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: 12px;
            position: relative;
        }

        .member-status {
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
        }

        .status-online { background: #10b981; }
        .status-away { background: #f59e0b; }
        .status-busy { background: #ef4444; }

        .member-info {
            flex: 1;
            min-width: 0;
        }

        .member-name {
            font-weight: 500;
            font-size: 14px;
            color: #1f2937;
        }

        .member-activity {
            font-size: 12px;
            color: #6b7280;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .main-layout {
                flex-direction: column;
            }

            .sidebar, .members-panel {
                width: 100%;
                height: auto;
                max-height: 200px;
            }

            .chat-area {
                height: calc(100vh - 260px);
            }
        }

        /* Scrollbar Styling */
        .rooms-list::-webkit-scrollbar,
        .chat-messages::-webkit-scrollbar,
        .members-list::-webkit-scrollbar {
            width: 6px;
        }

        .rooms-list::-webkit-scrollbar-track,
        .chat-messages::-webkit-scrollbar-track,
        .members-list::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        .rooms-list::-webkit-scrollbar-thumb,
        .chat-messages::-webkit-scrollbar-thumb,
        .members-list::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        /* Typing indicator */
        .typing-indicator {
            padding: 8px 24px;
            font-size: 12px;
            color: #6b7280;
            font-style: italic;
        }

        .typing-dots {
            display: inline-block;
            animation: typing 1.5s infinite;
        }

        @keyframes typing {
            0%, 60%, 100% { opacity: 0; }
            30% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <a class="logo" href="landingpage.html">FocusHive</a>
        <ul class="nav-links">
            <li><a href="dashboard (1).html" class="nav-link">Dashboard</a></li>
                    <li><a href="Rooms.html"  class="nav-link">Study Room</a></li>
                    <li><a href="chatRoom.html"  class="nav-link">Chat Room</a></li>
                    <li><a href="#ai-buddy"  class="nav-link">AI Buddy</a></li>
                    <li><a href="Analytics.html"  class="nav-link">Analytics</a></li>
                    <li><a href="profile.html"  class="nav-link">Profile</a></li>
                    <li><a href="#settings"  class="nav-link">Settings</a></li>
        </ul>
        <div class="nav-actions">
            <a href="login.html" class="btn-secondary">Login</a>
            <a href="signUpPage.html" class="btn-primary">Sign Up</a>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Sidebar - Whisper Rooms -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    ðŸ’¬ Whisper Rooms
                </div>
                <button class="add-room-btn" onclick="createRoom()" title="Create Room">+</button>
            </div>
            <div class="rooms-list" id="roomsList">
                <!-- Rooms will be populated by JavaScript -->
            </div>
            <div class="quick-join">
                <div class="quick-join-title">Quick Join Popular Rooms</div>
                <button class="btn-primary" style="width: 100%; font-size: 12px;" onclick="quickJoinRandom()">
                    ðŸŽ² Join Random Room
                </button>
            </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-area">
            <div class="chat-header">
                <div class="chat-room-icon">ðŸ’¬</div>
                <div class="chat-room-info">
                    <h2 id="currentRoomName">General Study</h2>
                    <div class="chat-room-status" id="roomStatus">A space for general campus related discussion. Research discussions and study tips.</div>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages">
                <!-- Messages will be populated by JavaScript -->
            </div>
            <div class="typing-indicator" id="typingIndicator" style="display: none;">
                Someone is typing<span class="typing-dots">...</span>
            </div>
            <div class="message-input-area">
                <div class="message-input-container">
                    <textarea class="message-input" id="messageInput" placeholder="Type your message..." rows="1"></textarea>
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Active Members Panel -->
        <div class="members-panel">
            <div class="members-header">
                <div class="members-title">Active Members</div>
                <div class="members-count" id="membersCount">8 online</div>
            </div>
            <div class="members-list" id="membersList">
                <!-- Members will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Sample data
        const rooms = [
            { id: 1, name: "General Study", icon: "general", participants: 45, active: true },
            { id: 2, name: "Mathematics Hub", icon: "mathematics", participants: 23, active: false },
            { id: 3, name: "Break Room", icon: "break", participants: 18, active: false },
            { id: 4, name: "Homework Help", icon: "homework", participants: 31, active: false },
            { id: 5, name: "Daily Check-In", icon: "daily", participants: 12, active: false },
            { id: 6, name: "Brainstorming Den", icon: "brainstorming", participants: 8, active: false }
        ];

        const members = [
            { name: "Sarah M.", activity: "Active now", status: "online", avatar: "S", color: "#ef4444" },
            { name: "Alex K.", activity: "Studying math", status: "online", avatar: "A", color: "#3b82f6" },
            { name: "Maya P.", activity: "2 minutes ago", status: "away", avatar: "M", color: "#10b981" },
            { name: "Jake D.", activity: "Active now", status: "online", avatar: "J", color: "#f59e0b" },
            { name: "Lisa C.", activity: "Taking notes", status: "busy", avatar: "L", color: "#8b5cf6" },
            { name: "Tom W.", activity: "5 minutes ago", status: "away", avatar: "T", color: "#06b6d4" },
            { name: "Emma R.", activity: "Active now", status: "online", avatar: "E", color: "#84cc16" },
            { name: "Ryan S.", activity: "Reading", status: "busy", avatar: "R", color: "#f97316" }
        ];

        const messages = [
            { 
                author: "Sarah M.", 
                time: "2:35 PM", 
                text: "Hi everyone! Who's up for a collaborative session today? Anyone else working on calculus?", 
                avatar: "S", 
                color: "#ef4444",
                reactions: ["ðŸ‘ 3", "ðŸ“š 2"]
            },
            {
                author: "Alex K.",
                time: "2:37 PM", 
                text: "Hey! I'm in. I'm stuck on derivatives. The substitution method is really confusing me.",
                avatar: "A",
                color: "#3b82f6",
                reactions: ["ðŸ¤” 1", "ðŸ‘ 1"]
            },
            {
                author: "Maya P.",
                time: "2:38 PM",
                text: "Would love to help with derivatives! I found this great method that makes it much clearer. Let's start a screen share session? ðŸ”",
                avatar: "M", 
                color: "#10b981",
                reactions: ["ðŸ”¥ 2", "ðŸ‘ 1"]
            },
            {
                author: "Jake D.",
                time: "2:40 PM",
                text: "Working on physics problems from class. Gravitational forces are tricky! Application problems are my weak spot.",
                avatar: "J",
                color: "#f59e0b",
                reactions: ["ðŸ“– 1"]
            },
            {
                author: "Lisa C.",
                time: "2:41 PM", 
                text: "Physics is tough! Have you tried breaking down problems systematically? Remember to always define your reference frame first ðŸ’¡",
                avatar: "L",
                color: "#8b5cf6",
                reactions: ["âœ… 4", "ðŸ’¡ 2"]
            }
        ];

        // Render rooms
        function renderRooms() {
            const roomsList = document.getElementById('roomsList');
            roomsList.innerHTML = rooms.map(room => `
                <div class="room-item ${room.active ? 'active' : ''}" onclick="selectRoom(${room.id})">
                    <div class="room-icon ${room.icon}">${getRoomEmoji(room.icon)}</div>
                    <div class="room-info">
                        <div class="room-name">${room.name}</div>
                        <div class="room-participants">${room.participants} members</div>
                    </div>
                </div>
            `).join('');
        }

        // Render members
        function renderMembers() {
            const membersList = document.getElementById('membersList');
            membersList.innerHTML = members.map(member => `
                <div class="member-item" onclick="startDirectMessage('${member.name}')">
                    <div class="member-avatar" style="background: ${member.color}">
                        ${member.avatar}
                        <div class="member-status status-${member.status}"></div>
                    </div>
                    <div class="member-info">
                        <div class="member-name">${member.name}</div>
                        <div class="member-activity">${member.activity}</div>
                    </div>
                </div>
            `).join('');
        }

        // Render messages
        function renderMessages() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = messages.map(message => `
                <div class="message">
                    <div class="message-avatar" style="background: ${message.color}">
                        ${message.avatar}
                    </div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-author">${message.author}</span>
                            <span class="message-time">${message.time}</span>
                        </div>
                        <div class="message-text">${message.text}</div>
                        ${message.reactions ? `
                            <div class="message-reactions">
                                ${message.reactions.map(reaction => `<span class="reaction" onclick="addReaction('${reaction}')">${reaction}</span>`).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
            
            // Scroll to bottom
            setTimeout(() => {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 100);
        }

        // Helper functions
        function getRoomEmoji(icon) {
            const emojis = {
                general: "ðŸ’¬",
                mathematics: "ðŸ“",
                break: "â˜•",
                homework: "ðŸ“",
                daily: "ðŸ“…",
                brainstorming: "ðŸ’¡"
            };
            return emojis[icon] || "ðŸ’¬";
        }

        function selectRoom(roomId) {
            // Update active room
            rooms.forEach(room => room.active = room.id === roomId);
            
            const selectedRoom = rooms.find(room => room.id === roomId);
            document.getElementById('currentRoomName').textContent = selectedRoom.name;
            
            // Update room status based on room type
            const statuses = {
                1: "A space for general campus related discussion. Research discussions and study tips.",
                2: "Focused mathematics discussions and problem-solving sessions.",
                3: "Casual conversations and break time discussions.",
                4: "Get help with assignments and homework questions.",
                5: "Daily motivation and goal-setting discussions.",
                6: "Creative thinking and idea generation sessions."
            };
            
            document.getElementById('roomStatus').textContent = statuses[roomId] || "Welcome to this study room!";
            
            renderRooms();
            
            // Simulate loading new messages
            showTypingIndicator();
            setTimeout(() => {
                hideTypingIndicator();
                // In a real app, you'd load messages for the selected room
            }, 1500);
        }

        function createRoom() {
            const roomName = prompt("Enter room name:");
            if (roomName) {
                alert(`Creating room "${roomName}"... ðŸŽ¯ Your custom study space will be ready shortly!`);
            }
        }

        function quickJoinRandom() {
            const randomRoom = rooms[Math.floor(Math.random() * rooms.length)];
            selectRoom(randomRoom.id);
            alert(`ðŸŽ² Welcome to ${randomRoom.name}! You've joined a random study room.`);
        }

        function startDirectMessage(memberName) {
            alert(`ðŸ’¬ Starting direct message with ${memberName}...`);
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const messageText = messageInput.value.trim();
            
            if (messageText) {
                // Add message to the chat
                const newMessage = {
                    author: "You",
                    time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                    text: messageText,
                    avatar: "Y",
                    color: "#6366f1",
                    reactions: []
                };
                
                messages.push(newMessage);
                renderMessages();
                messageInput.value = '';
                
                // Simulate response
                setTimeout(() => {
                    showTypingIndicator();
                    setTimeout(() => {
                        hideTypingIndicator();
                        const responses = [
                            "Great question! Let me think about that...",
                            "I agree! That's a really good point.",
                            "Thanks for sharing! That's helpful.",
                            "Interesting perspective! I hadn't thought of that.",
                            "That makes sense. Let's explore that further."
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        const randomMember = members[Math.floor(Math.random() * members.length)];
                        
                        const responseMessage = {
                            author: randomMember.name,
                            time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                            text: randomResponse,
                            avatar: randomMember.avatar,
                            color: randomMember.color,
                            reactions: []
                        };
                        
                        messages.push(responseMessage);
                        renderMessages();
                    }, 2000);
                }, 1000);
            }
        }

        function addReaction(reaction) {
            alert(`Added reaction: ${reaction}`);
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'block';
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        // Auto-resize textarea
        function setupTextarea() {
            const textarea = document.getElementById('messageInput');
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });
            
            // Send message on Enter (but not Shift+Enter)
            textarea.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            renderRooms();
            renderMembers();
            renderMessages();
            setupTextarea();
            
            // Simulate live updates
            setInterval(() => {
                // Randomly update member activities
                members.forEach(member => {
                    if (Math.random() < 0.1) { // 10% chance
                        const activities = ["Active now", "Studying", "Taking notes", "Reading", "Writing"];
                        member.activity = activities[Math.floor(Math.random() * activities.length)];
                    }
                });
                renderMembers();
            }, 10000);
        });
    </script>
</body>
</html>